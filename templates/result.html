<!DOCTYPE html>
<html>
<head>
    <title>Aircraft Performance Result</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<button class="theme-btn" onclick="toggleMode()">ðŸŒ™ / â˜€</button>

<div class="container">
    <h2>Performance Analysis - {{ name }}</h2>

    <p><b>Wing Area:</b> {{ area }} mÂ²</p>

    {% if status == "safe" %}
        <h3 style="color:green;">ðŸŸ¢ {{ verdict }}</h3>
        <p><b>Minimum Safe Takeoff Speed:</b> {{ safe_speed }} m/s</p>
    {% else %}
        <h3 style="color:red;">ðŸ”´ {{ verdict }}</h3>
    {% endif %}

    <canvas id="liftChart"></canvas>

    <h3>Saved Aircraft Designs</h3>
    <ul>
        {% for d in saved_designs %}
            <li>
                <b>{{ d[0] }}</b> â†’ Span: {{ d[1] }} m, Chord: {{ d[2] }} m, Weight: {{ d[3] }} N
            </li>
        {% endfor %}
    </ul>

    <br><a href="/">Go Back</a>
</div>

<script>
function toggleMode(){
    document.body.classList.toggle("dark");
}

const speeds = JSON.parse('{{ speeds | tojson }}');
const lifts = JSON.parse('{{ lifts | tojson }}');

new Chart(document.getElementById('liftChart'), {
    type: 'line',
    data: {
        labels: speeds,
        datasets: [{
            label: 'Lift Force (N)',
            data: lifts,
            borderWidth: 2,
            fill: false
        }]
    }
});
</script>

</body>
</html>
